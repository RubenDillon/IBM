Instana on Premises deployment
=


In this document we will discuss how to deploy Instana on Premises. We will be using one of the deployment models and the easiest way to do that.

For this activity we will need a virtual machine with the following reqs (Demo Installation type)
- 16 vCPU
- 64 GB RAM
- six four large filesystems to store data or one large filesystem (2TB) for demo environments
     - /mnt/instana/stanctl/analytics at least 500GB 
     - /mnt/instana/stanctl/data at least 500GB
     - /mnt/instana//stanctl/metrics at least 500GB
     - /mnt/instana/stanctl/objects at least 500GB
     - /var at least 60 GB
     - /home at least 40 GB
- Linux Operating System (we will be using RHEL 9.2)

https://www.ibm.com/docs/en/instana-observability/1.0.299?topic=cluster-system-requirements



xxxy

Prepare the environment
-

1. Create the different filesystems required for the deployment. Our environment have only one large volume

```
df -h

lsblk

sudo mkfs.xfs /dev/vdd

sudo mkdir /mnt/tempmnt

sudo mount /dev/vdd /mnt/tempmnt

sudo rsync -avx /mnt/ /mnt/tempmnt/

sudo mv /mnt /mnt.backup
sudo mkdir /mnt

sudo mount /dev/vdd /mnt

ls /mnt

sudo blkid /dev/vdd
# (copy the UUID)

sudo nano /etc/fstab
# Add at the end:
# UUID=UUID-HERE   /mnt   xfs   defaults   0 0

sudo umount /mnt
sudo mount -a
df -h

sudo rm -rf /mnt.backup

```

   
3. Configure the VM to support podman (Podman currently is the prefered container for RHEL OS) and install git and wget

```
sudo dnf install -y podman git wget
```

4. Configure the /etc/hosts

```
127.0.0.1      localhost localhost.localdomain
::1            localhost localhost.localdomain
local-ip         instana instana.training   agent-acceptor.instana.training

```


Instana pre reqs 
-

Entitlement keys... https://www.ibm.com/docs/en/concert?topic=deployment-obtaining-entitlement-api-key

1. Download the latest package of the Concert software, using the latest available version number. This package is also available on the Concert GitHub repository. Currently 1.10.0 is the latest version (https://github.com/IBM/Concert/releases)
